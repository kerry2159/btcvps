# Windsurf ä»é›¶å¼€å§‹ï¼šæ„å»ºå®Œæ•´åšå®¢ç½‘ç«™çš„è¯¦ç»†æ•™ç¨‹

ä»Šå¤©ï¼Œæˆ‘å°†å¸¦é¢†ä½ ä»é›¶å¼€å§‹ï¼Œä½¿ç”¨ Windsurf æ¡†æ¶æ„å»ºä¸€ä¸ªåŠŸèƒ½é½å…¨çš„åšå®¢ç½‘ç«™ã€‚æ— è®ºä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼Œè¿™ç¯‡æ•™ç¨‹éƒ½å°†ä¸€æ­¥æ­¥å¼•å¯¼ä½ å®Œæˆæ•´ä¸ªé¡¹ç›®ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©ä½ åœ¨é˜…è¯»å®Œè¿™ç¯‡æ•™ç¨‹åï¼Œèƒ½å¤Ÿç‹¬ç«‹ä½¿ç”¨ Windsurf æ„å»ºè‡ªå·±çš„ Web åº”ç”¨ç¨‹åºã€‚

## ç›®å½•

1. [é¡¹ç›®ä»‹ç»](#é¡¹ç›®ä»‹ç»)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [åˆ›å»º Windsurf é¡¹ç›®](#åˆ›å»º-windsurf-é¡¹ç›®)
4. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
5. [æ„å»ºåšå®¢é¦–é¡µ](#æ„å»ºåšå®¢é¦–é¡µ)
6. [ç”¨æˆ·æ³¨å†Œä¸ç™»å½•](#ç”¨æˆ·æ³¨å†Œä¸ç™»å½•)
7. [åˆ›å»ºåšå®¢æ–‡ç« ](#åˆ›å»ºåšå®¢æ–‡ç« )
8. [æŸ¥çœ‹åšå®¢æ–‡ç« ](#æŸ¥çœ‹åšå®¢æ–‡ç« )
9. [ç¼–è¾‘ä¸åˆ é™¤åšå®¢æ–‡ç« ](#ç¼–è¾‘ä¸åˆ é™¤åšå®¢æ–‡ç« )
10. [éƒ¨ç½²é¡¹ç›®](#éƒ¨ç½²é¡¹ç›®)
11. [æ€»ç»“](#æ€»ç»“)

## é¡¹ç›®ä»‹ç»

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„åšå®¢ç½‘ç«™ï¼Œç”¨æˆ·å¯ä»¥æ³¨å†Œã€ç™»å½•ï¼Œåˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘å’Œåˆ é™¤åšå®¢æ–‡ç« ã€‚è¿™ä¸ªé¡¹ç›®å°†æ¶µç›– Windsurf çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬è·¯ç”±ã€ä¸­é—´ä»¶ã€æ¨¡æ¿å¼•æ“ã€æ•°æ®åº“é›†æˆç­‰ã€‚

## ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒå·²ç»é…ç½®å¥½ï¼š

- **Node.js**ï¼šä» [Node.js å®˜ç½‘](https://nodejs.org/) ä¸‹è½½å¹¶å®‰è£…ã€‚
- **npm**ï¼šNode.js è‡ªå¸¦ npmï¼Œç”¨äºå®‰è£…ä¾èµ–åŒ…ã€‚
- **ä»£ç ç¼–è¾‘å™¨**ï¼šæ¨èä½¿ç”¨ Visual Studio Codeã€‚

å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿ Node.js å’Œ npm å·²ç»æ­£ç¡®å®‰è£…ï¼š

bash
node -v
npm -v


ğŸ‘‰ [WildCard | ä¸€åˆ†é’Ÿæ³¨å†Œï¼Œè½»æ¾è®¢é˜…æµ·å¤–çº¿ä¸ŠæœåŠ¡](https://bbtdd.com/WildCard)

## åˆ›å»º Windsurf é¡¹ç›®

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½•ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ª Node.js é¡¹ç›®ï¼š

bash
mkdir my-blog
cd my-blog
npm init -y


æ¥ä¸‹æ¥ï¼Œå®‰è£… Windsurf å’Œä¸€äº›å¿…è¦çš„ä¾èµ–ï¼š

bash
npm install windsurf express ejs mongoose body-parser


## é¡¹ç›®ç»“æ„

æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š


my-blog/
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js
â”‚   â”œâ”€â”€ Post.js
â”‚
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ home.ejs
â”‚   â”œâ”€â”€ register.ejs
â”‚   â”œâ”€â”€ login.ejs
â”‚   â”œâ”€â”€ create-post.ejs
â”‚   â”œâ”€â”€ edit-post.ejs
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ style.css
â”‚
â”œâ”€â”€ app.js
â””â”€â”€ package.json


## æ„å»ºåšå®¢é¦–é¡µ

### 5.1 é…ç½® Windsurf

é¦–å…ˆï¼Œåœ¨ `app.js` ä¸­é…ç½® Windsurfï¼š

javascript
const express = require('express');
const app = express();
const path = require('path');

app.set('view engine', 'ejs');
app.set('views', path.join(__dirname, 'views'));
app.use(express.static(path.join(__dirname, 'public')));

app.get('/', (req, res) => {
  res.render('home');
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});


### 5.2 åˆ›å»ºé¦–é¡µè·¯ç”±

åœ¨ `app.js` ä¸­æ·»åŠ é¦–é¡µè·¯ç”±ï¼š

javascript
app.get('/', (req, res) => {
  res.render('home');
});


### 5.3 åˆ›å»ºé¦–é¡µæ¨¡æ¿

åœ¨ `views` ç›®å½•ä¸‹åˆ›å»º `home.ejs` æ–‡ä»¶ï¼š

html
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Welcome to My Blog</h1>
  <ul>
    <% posts.forEach(post => { %>
      <li>
        <h2><%= post.title %></h2>
        <p><%= post.content %></p>
        <p>By: <%= post.author %></p>
      </li>
    <% }) %>
  </ul>
</body>
</html>


### 5.4 æ·»åŠ æ ·å¼

åœ¨ `public/css` ç›®å½•ä¸‹åˆ›å»º `style.css` æ–‡ä»¶ï¼š

css
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}

h1 {
  color: #333;
}


### 5.5 å¯åŠ¨æœåŠ¡å™¨

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ï¼š

bash
node app.js


æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://localhost:3000`ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°åšå®¢çš„é¦–é¡µã€‚

## ç”¨æˆ·æ³¨å†Œä¸ç™»å½•

### 6.1 é…ç½®ä¼šè¯

åœ¨ `app.js` ä¸­é…ç½®ä¼šè¯ç®¡ç†ï¼š

javascript
const session = require('express-session');
app.use(session({
  secret: 'my-secret-key',
  resave: false,
  saveUninitialized: true,
}));


### 6.2 åˆ›å»ºç”¨æˆ·æ¨¡å‹

åœ¨ `models` ç›®å½•ä¸‹åˆ›å»º `User.js` æ–‡ä»¶ï¼š

javascript
const mongoose = require('mongoose');
const userSchema = new mongoose.Schema({
  username: String,
  password: String,
});
module.exports = mongoose.model('User', userSchema);


### 6.3 è¿æ¥æ•°æ®åº“

åœ¨ `app.js` ä¸­è¿æ¥ MongoDBï¼š

javascript
const mongoose = require('mongoose');
mongoose.connect('mongodb://localhost:27017/my-blog');


### 6.4 ç”¨æˆ·æ³¨å†Œ

åœ¨ `app.js` ä¸­æ·»åŠ ç”¨æˆ·æ³¨å†Œè·¯ç”±ï¼š

javascript
app.post('/register', (req, res) => {
  const { username, password } = req.body;
  const user = new User({ username, password });
  user.save((err) => {
    if (err) return res.status(500).send(err);
    res.redirect('/login');
  });
});


### 6.5 ç”¨æˆ·ç™»å½•

åœ¨ `app.js` ä¸­æ·»åŠ ç”¨æˆ·ç™»å½•è·¯ç”±ï¼š

javascript
app.post('/login', (req, res) => {
  const { username, password } = req.body;
  User.findOne({ username, password }, (err, user) => {
    if (err) return res.status(500).send(err);
    if (!user) return res.status(404).send('User not found');
    req.session.user = user;
    res.redirect('/');
  });
});


### 6.6 åˆ›å»ºæ³¨å†Œä¸ç™»å½•æ¨¡æ¿

åœ¨ `views` ç›®å½•ä¸‹åˆ›å»º `register.ejs` å’Œ `login.ejs` æ–‡ä»¶ï¼š

**register.ejs**:

html
<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Register</h1>
  <form action="/register" method="POST">
    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required><br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br>
    <button type="submit">Register</button>
  </form>
</body>
</html>


**login.ejs**:

html
<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Login</h1>
  <form action="/login" method="POST">
    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required><br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br>
    <button type="submit">Login</button>
  </form>
</body>
</html>


## åˆ›å»ºåšå®¢æ–‡ç« 

### 7.1 åˆ›å»ºæ–‡ç« æ¨¡å‹

åœ¨ `models` ç›®å½•ä¸‹åˆ›å»º `Post.js` æ–‡ä»¶ï¼š

javascript
const mongoose = require('mongoose');
const postSchema = new mongoose.Schema({
  title: String,
  content: String,
  author: String,
});
module.exports = mongoose.model('Post', postSchema);


### 7.2 åˆ›å»ºæ–‡ç« è·¯ç”±

åœ¨ `app.js` ä¸­æ·»åŠ åˆ›å»ºæ–‡ç« çš„è·¯ç”±ï¼š

javascript
app.post('/create-post', (req, res) => {
  const { title, content, author } = req.body;
  const post = new Post({ title, content, author });
  post.save((err) => {
    if (err) return res.status(500).send(err);
    res.redirect('/');
  });
});


### 7.3 åˆ›å»ºæ–‡ç« æ¨¡æ¿

åœ¨ `views` ç›®å½•ä¸‹åˆ›å»º `create-post.ejs` æ–‡ä»¶ï¼š

html
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Create Post</h1>
  <form action="/create-post" method="POST">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" required><br>
    <label for="content">Content:</label>
    <textarea id="content" name="content" required></textarea><br>
    <button type="submit">Create Post</button>
  </form>
</body>
</html>


## æŸ¥çœ‹åšå®¢æ–‡ç« 

### 8.1 æ˜¾ç¤ºæ‰€æœ‰æ–‡ç« 

åœ¨ `app.js` ä¸­æ·»åŠ æ˜¾ç¤ºæ‰€æœ‰æ–‡ç« çš„è·¯ç”±ï¼š

javascript
app.get('/', (req, res) => {
  Post.find({}, (err, posts) => {
    if (err) return res.status(500).send(err);
    res.render('home', { posts });
  });
});


### 8.2 æ›´æ–°é¦–é¡µæ¨¡æ¿

æ›´æ–° `home.ejs` æ–‡ä»¶ä»¥æ˜¾ç¤ºæ‰€æœ‰æ–‡ç« ï¼š

html
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Welcome to My Blog</h1>
  <ul>
    <% posts.forEach(post => { %>
      <li>
        <h2><%= post.title %></h2>
        <p><%= post.content %></p>
        <p>By: <%= post.author %></p>
      </li>
    <% }) %>
  </ul>
</body>
</html>


## ç¼–è¾‘ä¸åˆ é™¤åšå®¢æ–‡ç« 

### 9.1 ç¼–è¾‘æ–‡ç« 

åœ¨ `app.js` ä¸­æ·»åŠ ç¼–è¾‘æ–‡ç« çš„è·¯ç”±ï¼š

javascript
app.get('/edit-post/:id', (req, res) => {
  Post.findById(req.params.id, (err, post) => {
    if (err) return res.status(500).send(err);
    res.render('edit-post', { post });
  });
});

app.post('/edit-post/:id', (req, res) => {
  const { title, content } = req.body;
  Post.findByIdAndUpdate(req.params.id, { title, content }, (err) => {
    if (err) return res.status(500).send(err);
    res.redirect('/');
  });
});


### 9.2 åˆ é™¤æ–‡ç« 

åœ¨ `app.js` ä¸­æ·»åŠ åˆ é™¤æ–‡ç« çš„è·¯ç”±ï¼š

javascript
app.post('/delete-post/:id', (req, res) => {
  Post.findByIdAndDelete(req.params.id, (err) => {
    if (err) return res.status(500).send(err);
    res.redirect('/');
  });
});


### 9.3 åˆ›å»ºç¼–è¾‘æ–‡ç« æ¨¡æ¿

åœ¨ `views` ç›®å½•ä¸‹åˆ›å»º `edit-post.ejs` æ–‡ä»¶ï¼š

html
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Edit Post</h1>
  <form action="/edit-post/<%= post._id %>" method="POST">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" value="<%= post.title %>" required><br>
    <label for="content">Content:</label>
    <textarea id="content" name="content" required><%= post.content %></textarea><br>
    <button type="submit">Save Changes</button>
  </form>
</body>
</html>


## éƒ¨ç½²é¡¹ç›®

### 10.1 ä½¿ç”¨ PM2 éƒ¨ç½²

å®‰è£… `pm2`ï¼š

bash
npm install -g pm2


ä½¿ç”¨ PM2 å¯åŠ¨åº”ç”¨ï¼š

bash
pm2 start app.js


### 10.2 éƒ¨ç½²åˆ° Heroku

å¦‚æœä½ æœ‰ Heroku è´¦å·ï¼Œå¯ä»¥å°†é¡¹ç›®éƒ¨ç½²åˆ° Herokuã€‚é¦–å…ˆï¼Œå®‰è£… Heroku CLI å¹¶ç™»å½•ï¼š

bash
heroku login


åˆ›å»º Heroku åº”ç”¨ï¼š

bash
heroku create


æ¨é€ä»£ç åˆ° Herokuï¼š

bash
git push heroku main


## æ€»ç»“

ç°åœ¨ï¼Œä½ å·²ç»æˆåŠŸä½¿ç”¨ Windsurf æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„åšå®¢ç½‘ç«™ã€‚é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ Windsurf åˆ›å»ºè·¯ç”±ã€å¤„ç†è¡¨å•ã€ç®¡ç†ä¼šè¯ã€é›†æˆæ•°æ®åº“ç­‰ã€‚å¸Œæœ›è¿™ç¯‡æ•™ç¨‹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œç¥ä½ åœ¨æœªæ¥çš„å¼€å‘æ—…ç¨‹ä¸­å–å¾—æ›´å¤šæˆå°±ï¼

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ã€‚ç»§ç»­åŠ æ²¹ï¼